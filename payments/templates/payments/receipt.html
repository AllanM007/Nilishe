{% load static %}
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="shortcut icon" type="image/png" href="{% static 'frontend/favicon.ico' %}"/>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
	<link rel="stylesheet" type="text/css" href="{% static 'payments/receipt.css' %}">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.1/html2pdf.bundle.min.js" ></script>
	<title>Receipt</title>
</head>
<body>
<div id="invoice">
    <div class="toolbar hidden-print">
        <div class="row">
        <div class="col-6">
            <a role = "button" class="btn" style="color: white;" href="">Home</a>
        </div>
        <div class="col-4">
            <button id="printInvoice" class="btn" style="background-color: #A5F; color: white;"><i class="fa fa-print"></i>
            	Print
            </button>
        </div>
    </div>
        <hr>
    </div>
    <div id="cover" class="invoice overflow-auto">
        <div style="min-width: 600px">
            <header>
                <div class="row">
                    <div class="col">
                        <a target="_blank" href="">
                            <img src="https://res.cloudinary.com/dewegtdzr/image/upload/v1588678724/favicon_cqcqc9.ico" data-holder-rendered="true" />
                            </a>
                    </div>
                    <div class="col company-details">
                        <h2 class="name">
                            <a target="_blank" href="">
                            Nilishe Ltd.
                            </a>
                        </h2>
                        <div>007 Bondy James, UK</div>
                        <div>(123) 456-789</div>
                        <div>company@example.com</div>
                    </div>
                </div>
            </header>
            <main>
                <div class="row contacts">
                    <div class="col invoice-to">
                        <div class="text-gray-light">INVOICE TO:</div>
                        <h2 class="to">{{ user.profile.first_name }}</h2>
                        <div class="address">{{ user.profile.address }}</div>
                        <div class="email">{{ user.email }}</a></div>
                    </div>
                    <div class="col invoice-details">
                        <h1 class="invoice-id">Invoice</h1>
                        <div>Date:<p id="datenow"></p></div>
                    </div>
                </div>
                <table border="0" cellspacing="0" cellpadding="0">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th class="text-left">DESCRIPTION</th>
                            <th class="text-right">Contractor Fee</th>
                            <th class="text-right">Nilishe's Fee</th>
                            <th class="text-right">TOTAL</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="no">01</td>
                            <td class="text-left"><h3> 
                               Payment for {{ deliver.first_name }} services
                            </td>
                            <td class="unit">Ksh {{ amount }}</td>
                            <td class="qty">8%</td>
                            <td class="total">Ksh {{ total }}</td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="2"></td>
                            <td colspan="2">GRAND TOTAL</td>
                            <td>Ksh {{ total }}</td>
                        </tr>
                    </tfoot>
                </table>
                <div class="notices">
                    <div>NOTICE:</div>
                    <div class="notice">A finance charge of 8.0% will be made on top of the agreed amount for our services.</div>
                </div>
                <br>
            </main>
            <footer>
                If you face any problems while getting your invoice <a href="">contact</a> us for help.
            </footer>
        </div>
        <!--DO NOT DELETE THIS div. IT is responsible for showing footer always at the bottom-->
        <div></div>
    </div>
<script type="text/javascript">
    window.onload = function(){

        var today = new Date();
        var time = today.toLocaleString('en-US', { hour: 'numeric', minute: 'numeric', hour12: true, year: 'numeric', month: 'numeric', day: 'numeric'})

        document.getElementById('datenow').innerHTML = time;

    };

	document.getElementById("printInvoice")
	document.addEventListener("click", function download() {
		const element = document.getElementById("cover");
		html2pdf()
		.from(element)
		.save();
	});
</script>
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</body>
</html>